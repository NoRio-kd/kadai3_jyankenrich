<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="./css/reset.css">
</head>
<body>
    <!-- å•é¡Œ -->
    <div id="quiz">
        <div id="question">ã“ã“ã«å•é¡ŒãŒå…¥ã‚Šã¾ã™</div>
        <div class="choices">
            <button class="choice" id="choice1">é¸æŠ1</button>
            <button class="choice" id="choice2">é¸æŠ2</button>
            <button class="choice" id="choice3">é¸æŠ3</button>
            <button class="choice" id="choice4">é¸æŠ4</button>
        </div>
        <!-- æ¬¡ã¸ãƒœã‚¿ãƒ³ -->    
        <button id="next-btn">æ¬¡ã¸</button>
    </div>
    <!-- çµæœ -->
     <div id="result" class="hide">
        <h2>çµæœ</h2>
        <p id="score">ã“ã“ã«ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹</p>
     </div>
    
    <!-- ã“ã“ã‹ã‚‰js -->
    <script>
        const quizData = [  //é…åˆ—ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ3ã¤ã‚’æ ¼ç´
            {
                question: "Where is the capital city of Japanï¼Ÿ",
                choices: ["Osaka","tokyo","kyoto","fukuoka"],
                correct: 1
            },
            {
                question: "what is the height of Mt.fuji",
                choices: ["3776m","2000m","1000m","3000m"],
                correct: 0 
            },
            {
                question: "What color is national flag of japan?",
                choices: ["red and white","blue","green","yellow"],
                correct: 0
            }
        ];

        console.log(quizData[0].question);
        console.log(quizData[1].choices);
        console.log(quizData[2].correct);

       // å¤‰æ•°ã®æŒ‡å®š
    let currentQuiz = 0        //ç¾åœ¨ã®quizç•ªå·   
    let score = 0        //userãŒæ­£è§£ã—ãŸæ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ
    
    // htmlè¦ç´ ã®å–å¾—
    const questionEl = document.getElementById('question');
            console.log(document.getElementById('question'));
    const choicesEl = document.querySelectorAll('.choice'); //classã ã‹ã‚‰ãƒ‰ãƒƒãƒˆå¿˜ã‚Œãš
            console.log(document.getElementById('.choice')); //null
    const nextBtn = document.getElementById('next-btn');
            console.log(document.getElementById('next-btn')); //documentã®ã‚¿ã‚¤ãƒã§ã‚¨ãƒ©ãƒ¼
    const resultEl = document.getElementById('result');
            console.log(document.getElementById('result'));
    const scoreEl = document.getElementById('score');
            console.log(document.getElementById('score'));
            
    // quizã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ loadQuizã¨ã„ã†é–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚‹ï¼ˆå®Ÿè¡Œã•ã‚Œã¦ãªã„ï¼‰
    function loadQuiz() {
        const currentQuizData = quizData[currentQuiz];
            console.log(quizData[currentQuiz]); 
        questionEl.textContent = currentQuizData.question;
            console.log(currentQuizData.question)
        choicesEl.forEach(function(choicesEl,index){
        choicesEl.textContent = currentQuizData.choices[index];
        choicesEl.classList.remove('correct', 'wrong');     
        });
        nextBtn.style.display = 'none';     //è¦ç´ .style.css propertyå=valueå€¤
      }


        //currentQuizDataã‚’å®šç¾©ã™ã‚‹
                //currentQuizDataã®Questionã‹ã‚‰è³ªå•ã‚’æŠœãå‡ºã—ã¦è¡¨ç¤º
                   //classå±æ€§ãŒchoiceã®å…¨ã¦ã€‚(choiceEl,index)ã¯ãµã‰rEachã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°
            // 
        //jqueryã§ã„ã†addclass
         //æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹ã€‚è¦ç´ .style.css propertyå=valueå€¤
    

    // ç­”ãˆã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ğŸŒ·
    function checkAnswer(index) {       //å¼•æ•°indexã‚’å—ã‘å–ã‚Šé¸æŠè‚¢ã®æ­£è§£ä¸æ­£è§£ã‚’åˆ¤æ–­
    const currentQuizData = quizData[currentQuiz]; //â­ï¸2ğŸ¤©2
    if (index === currentQuizData.correct) {
        score++;
        choicesEl[index].classList.add('correct');
    } else {
        choicesEl[index].classList.add('wrong');
    }
    nextBtn.style.display = 'block';
    }


    //ğŸ’é¸æŠè‚¢ã‚’ã‚¯ãƒªãƒƒãğŸŒ·ç„¡åé–¢æ•°ã‚’ä½¿ç”¨
    choicesEl.forEach(function(choicesEl, index) {           //forEachã¯choiceElã«å¯¾ã—ã¦é †ç•ªã«å‡¦ç†ã‚’è¡Œã†ã€‚choiceElã®index(ä½•ç•ªç›®ã«)
    choicesEl.addEventListener('click', function() {
        if (nextBtn.style.display === 'block') return;      //=ã¯äºŒã¤ã§ã‚‚å•é¡Œãªã„
        checkAnswer(index);
    });
    });

    //ç„¡åé–¢æ•°ã‚’æŒã¡è¦ã‚‰ãªã‹ã£ãŸå ´åˆã€handleClickã£ã¦é–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚„ã‚‹
                // ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†ã‚’é–¢æ•°ã¨ã—ã¦å®šç¾©
            function handleClick(choicesEl, index) {
                if (nextBtn.style.display == 'block') return;
                checkAnswer(index);
            }

            // choicesEl ã®è¦ç´ ã‚’é †ç•ªã«å‡¦ç†ã€‚ é…åˆ—å.forEach((å„é…åˆ—ã®è¦ç´ )=>{å®Ÿè¡Œã™ã‚‹å†…å®¹});
            choicesEl.forEach(function(choicesEl, index) {
                choicesEl.addEventListener('click', function() {
                    handleClick(choicesEl, index);  // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾å¿œã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã™
                });
            });



    //ğŸ’æ¬¡ã®ã‚¯ã‚¤ã‚ºã¾ãŸã¯çµæœè¡¨ç¤ºğŸŒ·â‡¨ã“ã“ã§checkAnsweré–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚‹
    nextBtn.addEventListener('click', function() {
    currentQuiz++;
    if (currentQuiz < quizData.length) {            //quizData ã¨ã„ã†é…åˆ—ã« 3ã¤ã®å•é¡Œï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ ãŒå…¥ã£ã¦ã„ã‚‹ãŸã‚ã€quizData.length ã¯ 3 ã¨ã„ã†å€¤ã‚’è¿”ã—ã¾ã™ã€‚
        loadQuiz();
    } else {
        displayResult();
    }
    });
    
        console.log(quizData.length); //lengthãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯é…åˆ—ã®è¦ç´ æ•°ã‚’èª¿ã¹ã‚‹ãŸã‚ã«ä½¿ã†
   
    quizData.push({
        question: "What is the national flower of japan",
        choices: ["Cherry blossom", "Plum blossom", "Chrysanthemum", "Pine"],
        correct: 0
    });
    console.log(quizData.length); // 4 é…åˆ—ã®è¦ç´ æ•°ã‚’è¿½åŠ ã—ãŸå ´åˆã€å¢—ãˆã‚‹


// ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®å ´åˆ
    // nextBtn.addEventListener('click', () => {
    //         currentQuiz++;
    //         if (currentQuiz < quizData.length) {
    //             loadQuiz();
    //         } else {
    //             displayResult();
    //         }
    //     });

// æ¬¡ã®ã‚¯ã‚¤ã‚ºã¾ãŸã¯çµæœè¡¨ç¤ºğŸŒ·
// çµæœã‚’è¡¨ç¤ºğŸŒ·
function displayResult() {  //å®Ÿè¡Œã™ã‚‹å†…å®¹
            document.getElementById('quiz').classList.add('hide');  //hide classã‚’åŠ ãˆã‚‹å‡¦ç†
            resultEl.classList.remove('hide');                      //hide classã‚’æ¶ˆå»ã™ã‚‹å‡¦ç†
            scoreEl.textContent = `ã‚ãªãŸã®ã‚¹ã‚³ã‚¢ã¯ ${score}/${quizData.length} ã§ã™`;
        }

//åˆæœŸãƒ­ãƒ¼ãƒ‰ğŸŒ· loadQuizé–¢æ•°ã‚’å®Ÿè¡Œã€‚ã“ã„ã¤ã§å•é¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹
loadQuiz();


    </script>
</body>
</html>